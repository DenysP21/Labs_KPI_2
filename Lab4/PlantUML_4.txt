@startuml
title Процес видачі книги (UML Activity)

|Читач|
start
:"Знайти книгу в залі";
:"Надати книгу та читацьку картку";

|Бібліотекар|
:"Сканувати картку читача";

|Система|
:"Перевірити акаунт читача";

|Бібліотекар|
if (Все ОК) then (Так)
  :Ввести номер книги;

  |Система|
  :Перевірити статус книги;

  |Бібліотекар|
  if (Книга доступна для видачі?) then (Так)
    
    |Система|
    :Створити запис про видачу;
    fork
      :Оновити статус книги;
    fork again
      :Зберегти транзакцію в історії читача;
    end fork
    
    |Бібліотекар|
    :Повідомити дату повернення;

    |Читач|
    :Отримати книгу;
    stop 
  else (Ні)
    |Бібліотекар|
    :Повідомити про проблему;
    
    |Читач|
    :Отримати повідомлення про проблему;
    
    stop
  endif

else (Не ОК)
    |Бібліотекар|
  :Повідомити про проблему (акаунт);
  
  |Читач|
  :Отримати повідомлення про проблему;
  stop 
endif

@enduml
